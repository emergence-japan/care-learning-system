# Track Specification: ログインID制への移行とパスワード管理機能

## 1. 概要 (Overview)
メールアドレスを必須としない「ログインID制」を導入し、施設管理者がスタッフのアカウント（ID・パスワード）を完全に制御できる運用フローを構築します。

## 2. ユーザー体験 (User Experience)
- **スタッフ (STAFF):**
  - 管理者から付与された「ログインID」と「初期パスワード」でログインする。
  - パスワードを忘れた際は管理者に伝え、新しいパスワードを設定してもらう。
  - 自身でパスワードを変更する機能は持たない。
- **施設管理者 (ADMIN):**
  - スタッフ登録時に、メールアドレスではなく「ログインID」を設定する。
  - スタッフ一覧画面で各スタッフのログインIDおよび**設定済みパスワード**を確認できる。
  - 「パスワード再設定」ボタンから、スタッフのパスワードをいつでも強制的に書き換えることができる。
- **ログイン画面:**
  - 「メールアドレス」の代わりに「ログインID」を入力してログインする。

## 3. 機能要件 (Functional Requirements)
- **データモデルの変更:**
  - `User` モデルに `loginId` フィールドを追加（必須、ユニーク）。
  - `email` フィールドを任意（Optional）またはログインには使用しない形に変更。
- **セキュリティ方針の特例（トレードオフ）:**
  - 介護現場の運用実態（スタッフのパスワード紛失等）を考慮し、管理者がスタッフにパスワードを直接教えられるよう、パスワードを暗号化（ハッシュ化）せず可視状態で管理・表示する設計を採用する。
- **認証ロジックの更新:**
  - `NextAuth.js` の認証識別子を `email` から `loginId` に変更。
- **管理者向け操作の追加:**
  - `registerStaff` アクションの入力項目を `loginId` に変更。
  - `updateStaffPassword`（パスワード上書き）アクションの新規実装。
  - パスワード上書き用ダイアログの実装。
- **UIの整理:**
  - ログイン画面、登録フォーム、一覧画面の「メールアドレス」表記を「ログインID」に置換。

## 4. 受入基準 (Acceptance Criteria)
- [ ] メールアドレスを持たないスタッフが、ログインIDのみでログインできること。
- [ ] 施設管理者がスタッフ一覧から各個人のログインIDを確認できること。
- [ ] 施設管理者がスタッフのパスワードを上書きし、即座に新しいパスワードでログイン可能になること。
- [ ] スタッフ自身にはパスワード変更UIが表示されないこと。

## 5. 検討事項 (Out of Scope)
- 既存ユーザーのメールアドレスからログインIDへの自動移行（手動または再登録での対応を想定）。
